### Cups

Собираем ядро
Собрать gtk c поддержкой cups
добавляем пользователя в группы
gpasswd -a user lp lpadmin
Идем на морду http://localhost:631/


hp-1320
поставил cups printer-driver-hpijs
На убунту 16.04 все заработало без hplip
На win машинах выбрал принтер 2300l_PS
Принтер расшарился sambo 
_______________

/etc/init.d/cupsd - служба
/etc/cups/cupsd.conf

расшариваем порт
Listen localhost:631

Добавляем в секции доступ / /admin /admin/conf
добавлять нужно в каждую секцию
allow all (скорее всего я имел ввиду cupsd.conf файл)

Виртуалку запускать нужно под рутом, чтобы получить usb
__________________
lpstat -a посмотреть принтеры
lpstat -v 


Принтер по умолчанию:
поставить в lpoptions -d printer-name
Или через опцию в веб-морде set as server default

___________________

Простая печать
cat zim/man/cups.txt | lp

Двухсторонняя печать:
lp -o sides=two-sided-long-edge file.txt 
_____________________
Расшарить принтер:

Сервер - получаем доступ к админке
Добавляем в конфиг права доступа
/etc/cups/cupsd.conf
Allow From All - в три пeрвые секции

Клиент:
ставим cups, запускаем
Проверяем коннект: http:/distination:631
Идем в http://localhost:631 и создаем новый сетевой принтер ipp
ipp://192.168.0.100/printers/HP_LaserJet_1320_series
Можно взять имя из адресной строки принтера в браузере или lpstat -v сервера
Драйвер, модель IPP Everywhere



========
HP 1018 - ставим hplip, предварительно отключаем lpusb модуль ядра
Запускаем hp-setup который настраивает cupsd
Обрщаем внимание на статус в котором находится принтер, выводим его из режима
ожидания
