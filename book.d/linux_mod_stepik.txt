Разработка модулей ядра linux
https://stepik.org/lesson/40436/

использование sysfs и структуры KObjects

Источники с документацией

lwn.net - журнал где тусутся ключевые разработчики

исходники ядра посмотреть:
elixir.free-electrons.com
рассылки
vger.kernel.org

kernelnewbies.org - по ядру для новичков
lkml.org - подписка на рассылки, и архив

Цифры в версии ядра:
старшая -  решается голосованием
minor - соответствует количеству внесенных изменений
последняя - количество внесенных патчей

linuxdriverproject.org - поддержка устройств и статус драйверов

______________________

Устройства 
	символьные
	блочные 
	сетевые


Драйвер работает в ядре, пользователь обращается через системном интерфейсе
write
open
close
read

каждому драйверу соответсвует специальная структура
device.h

#define LOGLEVEL - устанвливает количество выводимой отладочной информации

Простой модуль
init cleanup - функции загрузки

insmod

передача параметра модулю
#include <linux/modulesparam.h>

insmod mod irg=3,4,5

загрузка hot_plug
при загрузке 

MODULE_DEVICE_TABLE(type,name)

таблица модуля для правильной инициализации устройств

Драйвер символьного устройства
________________

Отладка ядра

Oops - сообщение. Краш сообщение полное

gdb /boot/vmlinux /proc/kcore

kdb - ядерный отладчик
kgdb 
crash


/debugfs 
подключаем <linux/fs.h> <linux/debugfs.h>
kprobes - отладчик и обработчик

