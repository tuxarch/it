sudo usermod -d /var/lib/mysql/ mysql - убрать ошибку в ubuntu
_____________________
create alter drop - команды создания, редактирования и удаления

SELECT USER from mysql.user; - посмотреть пользователей
SHOW DATABASES - посмотреть базы данных
show tables - просмотр таблиц
show create table tovar - посмотреть структуру таблицы
show index from tovar - посмотреть индексы к таблице
___________________________
DROP DATABASE db-name

создание 
	индексы create index name_index on table_name(coll_name)
select - задать колонки
from - из какой базы
where - условие 
order by - сортировка вывода

_________________________________

чтобы получить доступ по сети нужно
	1) в файле my.cnf прописать порт
	2) закомитеть #bind-address           = 127.0.0.1
 	3) GRANT ALL PRIVILEGES ON database.* TO username@"%" IDENTIFIED BY 'password'
	   WITH GRANT OPTION;  а также разрешить подключаться по сети к базе.

 mysql --host=172.17.0.2 -u root -p  подключиться к базе удаленно.

	

\s STATUS - выводит статистку по программе
DESCRIBE table  // show create table <table> - позволяет посмотреть структуру таблицы
INSERT INTO table VALUES ('1','Ivan') - добавить запись
SELECT * FROM table - вывести содержимое таблицы
		    WHERE colum='value' - условие
UPDATE table SET age='21' WHERE surname='Smirnov' - изменить значение age
DELETE FROM table WHERE id='4' - удалить запись 4
SELECT COUNT(*) FROM table - подсчитать количество строк в таблице

CREATE USER 'anna' IDENTIFIED BY 'annapassword'; - создание пользователя
GRANT SELECT,INSERT,DELETE,UPDATE ON test.* TO 'admin'@'localhost' IDENTIFIED
BY 'secret'; - создаем пользователя 'admin' таблицы 'test' с указанными
правами и паролем 'secret'
REVOKE CREATE ON *.* FROM 'anna'@'localhost'; - отмена привелегии на создание

SHOW GRANTS FOR 'admin'@'localhost'; - посмотреть права пользователя
CHECK TABLE <Список таблиц>; - проверить таблицы
mysqlbinlog - позволяет посмотреть логи

_________________________
/var/lib/mysql - место хранение базы данных
help - подсказка по командам
/etc/mysql/my.cnf - конфиг файл
__________________________________

SHOW PROCESSLIST - выводит список запущенных процессов

Нужно оптимизировать работу в случае большой базы

'--skip-grant-tables' - поменять пароль, запускаем службу скидываем пароль

Поставить пароль
mysqladmin -u root password 'new_psd'
mysqladmin -u root -p'old_pas' password 'new_psd'

____________________________________


mysqldump --opt -p test > test.sql - сделать бекап ( нужно ввести пароль)
mysql -p test2 < test.sql - восстановит базу из резервной копии


SET NAMES cp866 - установление кодировки 



__________________________
Типы данных 
	булены, биты
	инты - средние, малые и большие
	serial - автогенерация большого положит числа с увеличением
	децималы и флоты
	даты и временные метки
	чар до 256 символов
	варчар до 65 000 
	блобы, тексты, - до 4 гб


Обязательно нужно назначить PRIMARY KEY колонку для таблицы

UNIQUE (adress,tel) запрет на совпадения в столбцах
_________________________________________________
Создание таблицы:

CREATE TABLE Orders
(id SERIAL,
date DATE,
product_id BIGINT UNSIGNED NOT NULL,
qty INT UNSIGNED,
amount DECIMAL(10,2),
customer_id BIGINT UNSIGNED,
PRIMARY KEY (id),
FOREIGN KEY (product_id) REFERENCES Products (id)
ON DELETE RESTRICT ON UPDATE CASCADE,
FOREIGN KEY (customer_id) REFERENCES Customers (id)
ON DELETE RESTRICT ON UPDATE CASCADE)
ENGINE InnoDB CHARACTER SET utf8;
________________________________________________

Быстрое заполнение таблицы:
	создаем на табах файл-таблицу
	\N - вместо NULL
 	LOAD DATA LOCAL INFILE 'C:/data/Customers.txt' INTO TABLE Customers CHARACTER SET cp1251;

Запрос в запросе:
	SELECT name FROM Customers
	WHERE id IN
	(SELECT DISTINCT customer_id FROM Orders
	WHERE product_id = 5);

UNION - позволяет объединять запросы

Выгрузить запрос а потом загрузить 
	SELECT * from Customers INTO OUTFILE 'C:/data/Customers.txt';
	
	LOAD DATA INFILE 'C:/data/Customers.txt'
	INTO TABLE Customers_copy;

SELECT SUM(rating) FROM Customers; - высчитывает сумму в столбце
SELECT AVG(rating) FROM Customers; - среднее арифметическое в стл
SELECT MAX(rating) FROM Customers;
SELECT MIN(rating) FROM Customers;
SELECT COUNT(rating) FROM Customers; - количество не равное NULL

GROUP BY - позволяет объединять в стороки в группы и уже с ними работать

_________________________
Пользователи - различные права с различных ip-адресов


change master to master_host='sql1.srg-it.ru', master_user='repl',
master_password='', master_log_file='sql1-bin.001468', master_log_pos=89581550;

